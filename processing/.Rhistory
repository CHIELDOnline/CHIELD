varLabels = unique(c(d$Var1.label,d$Var2.label))
varIds = v[match(varLabels,v$name),]$pk
paste(varIds,'[label="',varLabels,'"]', sep='')
varLabels = unique(c(d$Var1.label,d$Var2.label))
varIds = v[match(varLabels,v$name),]$pk
nodesDot = paste("V",varIds,' [label="',varLabels,'"]', sep='')
edgesProperties = dotEdgeTypes[d$Relation]
edgesDot = paste(
"V",d$Var1,
" -> ",
"V",d$Var2,
" [",edgesProperties,"] ",
sep=""
)
dotEdgeTypes = c(">"= 'arrowhead="normal",arrowtail="none"',
"<=>"= 'arrowhead="normal",arrowtail="normal"',
"<"= 'arrowhead="none",arrowtail="normal"',
"~"= 'arrowhead="none",arrowtail="none",style="dashed"',
"/>"='arrowhead="tee",arrowtail="none"',
">>"='arrowhead="normal",arrowtail="none"',
"~="='arrowhead="dot",arrowtail="none"',
"^"='arrowhead="normal",arrowtail="none",style="dashed"'
)
varLabels = unique(c(d$Var1.label,d$Var2.label))
varIds = v[match(varLabels,v$name),]$pk
nodesDot = paste("V",varIds,' [label="',varLabels,'"]', sep='')
edgesProperties = dotEdgeTypes[d$Relation]
edgesDot = paste(
"V",d$Var1,
" -> ",
"V",d$Var2,
" [",edgesProperties,"] ",
sep=""
)
edgesDot[1:5]
paste0("digraph chield {",
paste(nodesDot,collapse = "\n"),
"\n",
paste(edgesProperties, collapse = "\n"),
"}"
)
doc = unique(d$bibref)[1]
docDot = causalLinksToDOT(d[d$bibref==doc,])
# Convert causal links to dot language
try(setwd("~/Documents/Bristol/CHIELD/CHIELD_Online/processing/"))
dotEdgeTypes = c(">"= 'arrowhead="normal",arrowtail="none"',
"<=>"= 'arrowhead="normal",arrowtail="normal"',
"<"= 'arrowhead="none",arrowtail="normal"',
"~"= 'arrowhead="none",arrowtail="none",style="dashed"',
"/>"='arrowhead="tee",arrowtail="none"',
">>"='arrowhead="normal",arrowtail="none"',
"~="='arrowhead="dot",arrowtail="none"',
"^"='arrowhead="normal",arrowtail="none",style="dashed"'
)
causalLinksToDOT = function(d){
varLabels = unique(c(d$Var1.label,d$Var2.label))
varIds = v[match(varLabels,v$name),]$pk
nodesDot = paste("V",varIds,' [label="',varLabels,'"]', sep='')
edgesProperties = dotEdgeTypes[d$Relation]
edgesDot = paste(
"V",d$Var1,
" -> ",
"V",d$Var2,
" [",edgesProperties,"] ",
sep=""
)
dot = paste0("digraph chield {\n",
paste(nodesDot,collapse = "\n"),
"\n",
paste(edgesProperties, collapse = "\n"),
"}"
)
return(dot)
}
d = read.csv("../app/data/db/CausalLinks.csv",stringsAsFactors = F)
v = read.csv("../app/data/db/Variables.csv",stringsAsFactors = F)
d$Var1.label = v[match(d$Var1,v$pk),]$name
d$Var2.label = v[match(d$Var2,v$pk),]$name
docDot = causalLinksToDOT(d[d$bibref==doc,])
filename = paste0("../../",bibref,".dot")
filename = paste0("../../",doc,".dot")
cat(docDot,file=filename)
filename
docDot = causalLinksToDOT(d[d$bibref==doc,])
filename = paste0("../../Graphs/dot/",doc,".dot")
cat(docDot,file=filename)
paste(edgesDot,edgesProperties, collapse = "\n")
edgesDot = paste(
"V",d$Var1,
" -> ",
"V",d$Var2,
" [",edgesProperties,"] ",
sep=""
)
edgesDot
# Convert causal links to dot language
try(setwd("~/Documents/Bristol/CHIELD/CHIELD_Online/processing/"))
dotEdgeTypes = c(">"= 'arrowhead="normal",arrowtail="none"',
"<=>"= 'arrowhead="normal",arrowtail="normal"',
"<"= 'arrowhead="none",arrowtail="normal"',
"~"= 'arrowhead="none",arrowtail="none",style="dashed"',
"/>"='arrowhead="tee",arrowtail="none"',
">>"='arrowhead="normal",arrowtail="none"',
"~="='arrowhead="dot",arrowtail="none"',
"^"='arrowhead="normal",arrowtail="none",style="dashed"'
)
causalLinksToDOT = function(d){
varLabels = unique(c(d$Var1.label,d$Var2.label))
varIds = v[match(varLabels,v$name),]$pk
nodesDot = paste("V",varIds,' [label="',varLabels,'"]', sep='')
edgesProperties = dotEdgeTypes[d$Relation]
edgesDot = paste(
"V",d$Var1,
" -> ",
"V",d$Var2,
" [",edgesProperties,"] ",
sep=""
)
dot = paste0("digraph chield {\n",
paste(nodesDot,collapse = "\n"),
"\n",
paste(edgesDot, collapse = "\n"),
"\n}"
)
return(dot)
}
docDot = causalLinksToDOT(d[d$bibref==doc,])
filename = paste0("../../Graphs/dot/",doc,".dot")
cat(docDot,file=filename)
# Convert causal links to dot language
try(setwd("~/Documents/Bristol/CHIELD/CHIELD_Online/processing/"))
dotEdgeTypes = c(">"= 'arrowhead="normal",arrowtail="none"',
"<=>"= 'arrowhead="normal",arrowtail="normal"',
"<"= 'arrowhead="none",arrowtail="normal"',
"~"= 'arrowhead="none",arrowtail="none",style="dashed"',
"/>"='arrowhead="tee",arrowtail="none"',
">>"='arrowhead="normal",arrowtail="none"',
"~="='arrowhead="dot",arrowtail="none"',
"^"='arrowhead="normal",arrowtail="none",style="dashed"'
)
causalLinksToDOT = function(d){
varLabels = unique(c(d$Var1.label,d$Var2.label))
varIds = v[match(varLabels,v$name),]$pk
nodesDot = paste("V",varIds,' [label="',varLabels,'"]', sep='')
edgesProperties = dotEdgeTypes[d$Relation]
edgesDot = paste(
"V",d$Var1,
" -> ",
"V",d$Var2,
" [",edgesProperties,"] ",
sep=""
)
dot = paste0("digraph chield {\n",
'node [color="#e92b2b", bgcolor="#ffd2d2"]\n\n',
paste(nodesDot,collapse = "\n"),
"\n",
paste(edgesDot, collapse = "\n"),
"\n}"
)
return(dot)
}
docDot = causalLinksToDOT(d[d$bibref==doc,])
filename = paste0("../../Graphs/dot/",doc,".dot")
cat(docDot,file=filename)
# Convert causal links to dot language
try(setwd("~/Documents/Bristol/CHIELD/CHIELD_Online/processing/"))
dotEdgeTypes = c(">"= 'arrowhead="normal",arrowtail="none"',
"<=>"= 'arrowhead="normal",arrowtail="normal"',
"<"= 'arrowhead="none",arrowtail="normal"',
"~"= 'arrowhead="none",arrowtail="none",style="dashed"',
"/>"='arrowhead="tee",arrowtail="none"',
">>"='arrowhead="normal",arrowtail="none"',
"~="='arrowhead="dot",arrowtail="none"',
"^"='arrowhead="normal",arrowtail="none",style="dashed"'
)
causalLinksToDOT = function(d){
varLabels = unique(c(d$Var1.label,d$Var2.label))
varIds = v[match(varLabels,v$name),]$pk
nodesDot = paste("V",varIds,' [label="',varLabels,'"]', sep='')
edgesProperties = dotEdgeTypes[d$Relation]
edgesDot = paste(
"V",d$Var1,
" -> ",
"V",d$Var2,
" [",edgesProperties,"] ",
sep=""
)
dot = paste0("digraph chield {\n",
'node [color="#e92b2b", fillcolor="#ffd2d2"]\n\n',
paste(nodesDot,collapse = "\n"),
"\n",
paste(edgesDot, collapse = "\n"),
"\n}"
)
return(dot)
}
docDot = causalLinksToDOT(d[d$bibref==doc,])
filename = paste0("../../Graphs/dot/",doc,".dot")
cat(docDot,file=filename)
# Convert causal links to dot language
try(setwd("~/Documents/Bristol/CHIELD/CHIELD_Online/processing/"))
dotEdgeTypes = c(">"= 'arrowhead="normal",arrowtail="none"',
"<=>"= 'arrowhead="normal",arrowtail="normal"',
"<"= 'arrowhead="none",arrowtail="normal"',
"~"= 'arrowhead="none",arrowtail="none",style="dashed"',
"/>"='arrowhead="tee",arrowtail="none"',
">>"='arrowhead="normal",arrowtail="none"',
"~="='arrowhead="dot",arrowtail="none"',
"^"='arrowhead="normal",arrowtail="none",style="dashed"'
)
causalLinksToDOT = function(d){
varLabels = unique(c(d$Var1.label,d$Var2.label))
varIds = v[match(varLabels,v$name),]$pk
nodesDot = paste("V",varIds,' [label="',varLabels,'"]', sep='')
edgesProperties = dotEdgeTypes[d$Relation]
edgesDot = paste(
"V",d$Var1,
" -> ",
"V",d$Var2,
" [",edgesProperties,"] ",
sep=""
)
dot = paste0("digraph chield {\n",
'node [color="#e92b2b", style=filled, fillcolor="#ffd2d2"]\n\n',
paste(nodesDot,collapse = "\n"),
"\n",
paste(edgesDot, collapse = "\n"),
"\n}"
)
return(dot)
}
docDot = causalLinksToDOT(d[d$bibref==doc,])
filename = paste0("../../Graphs/dot/",doc,".dot")
cat(docDot,file=filename)
doc = unique(d$bibref)[2]
docDot = causalLinksToDOT(d[d$bibref==doc,])
filename = paste0("../../Graphs/dot/",doc,".dot")
cat(docDot,file=filename)
# Convert causal links to dot language
try(setwd("~/Documents/Bristol/CHIELD/CHIELD_Online/processing/"))
dotEdgeTypes = c(">"= 'arrowhead="normal",arrowtail="none"',
"<=>"= 'arrowhead="normal",arrowtail="normal"',
"<"= 'arrowhead="none",arrowtail="normal"',
"~"= 'arrowhead="none",arrowtail="none",style="dashed"',
"/>"='arrowhead="tee",arrowtail="none"',
">>"='arrowhead="normal",arrowtail="none"',
"~="='arrowhead="dot",arrowtail="none"',
"^"='arrowhead="normal",arrowtail="none",style="dashed"'
)
causalLinksToDOT = function(d){
varLabels = unique(c(d$Var1.label,d$Var2.label))
varIds = v[match(varLabels,v$name),]$pk
nodesDot = paste("V",varIds,' [label="',varLabels,'"]', sep='')
edgesProperties = dotEdgeTypes[d$Relation]
edgesDot = paste(
"V",d$Var1,
" -> ",
"V",d$Var2,
" [",edgesProperties,"] ",
sep=""
)
dot = paste0("digraph chield {\n",
'node [color="#e92b2b", style=filled, fillcolor="#ffd2d2"]\n\n',
paste(nodesDot,collapse = "\n"),
"\n",
paste(edgesDot, collapse = "\n"),
"\n}"
)
return(dot)
}
d = read.csv("../app/data/db/CausalLinks.csv",stringsAsFactors = F)
v = read.csv("../app/data/db/Variables.csv",stringsAsFactors = F)
d$Var1.label = v[match(d$Var1,v$pk),]$name
d$Var2.label = v[match(d$Var2,v$pk),]$name
for(doc in unique(d$bibref)){
docDot = causalLinksToDOT(d[d$bibref==doc,])
filename = paste0("../../Graphs/dot/",doc,".dot")
cat(docDot,file=filename)
}
doc = "dunbar2004gossip"
docDot = causalLinksToDOT(d[d$bibref==doc,])
docDot
d[d$bibref==doc,]
d =
d = d[d$bibref==doc,]
varLabels = unique(c(d$Var1.label,d$Var2.label))
varIds = v[match(varLabels,v$name),]$pk
nodesDot = paste("V",varIds,' [label="',varLabels,'"]', sep='')
edgesProperties = dotEdgeTypes[d$Relation]
edgesDot = paste(
"V",d$Var1,
" -> ",
"V",d$Var2,
" [",edgesProperties,"] ",
sep=""
)
edgesDot
d
# Convert causal links to dot language
try(setwd("~/Documents/Bristol/CHIELD/CHIELD_Online/processing/"))
dotEdgeTypes = c(">"= 'arrowhead="normal",arrowtail="none"',
"<=>"= 'arrowhead="normal",arrowtail="normal"',
"<"= 'arrowhead="none",arrowtail="normal"',
"~"= 'arrowhead="none",arrowtail="none",style="dashed",color="#b3b6b7"',
"/>"='arrowhead="tee",arrowtail="none"',
">>"='arrowhead="normal",arrowtail="none"',
"~="='arrowhead="dot",arrowtail="none"',
"^"='arrowhead="normal",arrowtail="none",style="dashed",color="Green"'
)
causalLinksToDOT = function(d){
varLabels = unique(c(d$Var1.label,d$Var2.label))
varIds = v[match(varLabels,v$name),]$pk
nodesDot = paste("V",varIds,' [label="',varLabels,'"]', sep='')
edgesProperties = dotEdgeTypes[d$Relation]
edgesDot = paste(
"V",d$Var1,
" -> ",
"V",d$Var2,
" [",edgesProperties,"] ",
sep=""
)
dot = paste0("digraph chield {\n",
'node [color="#e92b2b", style=filled, fillcolor="#ffd2d2"]\n\n',
paste(nodesDot,collapse = "\n"),
"\n",
paste(edgesDot, collapse = "\n"),
"\n}"
)
return(dot)
}
d = read.csv("../app/data/db/CausalLinks.csv",stringsAsFactors = F)
v = read.csv("../app/data/db/Variables.csv",stringsAsFactors = F)
d$Var1.label = v[match(d$Var1,v$pk),]$name
d$Var2.label = v[match(d$Var2,v$pk),]$name
for(doc in unique(d$bibref)){
docDot = causalLinksToDOT(d[d$bibref==doc,])
filename = paste0("../../Graphs/dot/",doc,".dot")
cat(docDot,file=filename)
}
allLinksDot = causalLinksToDOT(d)
allLinksDot
allLinksDot = causalLinksToDOT(d)
cat(allLinksDot, file="../../Graphs/dot/AllLinks.dot")
try(setwd("~/Documents/Bristol/CHIELD/CHIELD_Online/analysis/"))
d = read.csv("../app/data/db/CausalLinks.csv",stringsAsFactors = F)
v = read.csv("../app/data/db/Variables.csv",stringsAsFactors = F)
library(igraph)
d = d[d$Relation!="/>",]
library(igraph)
library(igraph)
try(setwd("~/Documents/Bristol/CHIELD/CHIELD_Online/analysis/"))
makeIGraph = function(d){
}
d = read.csv("../app/data/db/CausalLinks.csv",stringsAsFactors = F)
v = read.csv("../app/data/db/Variables.csv",stringsAsFactors = F)
d$Var1.label = v[match(d$Var1,v$pk),]$name
d$Var2.label = v[match(d$Var2,v$pk),]$name
d = d[d$Relation!="/>",]
g = graph_from_data_frame(d[,c("Var1.label","Var2.label")])
clu <- components(g)
groups(clu)
sapply(groups(clu),length)
length(groups(clu))
i = 1
g = graph_from_data_frame(d[d$Relation!="/>",
c("Var1.label","Var2.label")])
clu <- components(g)
grps = groups(clu)
grps[[i]]
T & F
# Convert causal links to dot language
library(igraph)
try(setwd("~/Documents/Bristol/CHIELD/CHIELD_Online/processing/"))
dotEdgeTypes = c(">"= 'arrowhead="normal",arrowtail="none"',
"<=>"= 'arrowhead="normal",arrowtail="normal"',
"<"= 'arrowhead="none",arrowtail="normal"',
"~"= 'arrowhead="none",arrowtail="none",style="dashed",color="#b3b6b7"',
"/>"='arrowhead="tee",arrowtail="none"',
">>"='arrowhead="normal",arrowtail="none"',
"~="='arrowhead="dot",arrowtail="none"',
"^"='arrowhead="normal",arrowtail="none",style="dashed",color="Green"'
)
causalLinksToDOT = function(d){
varLabels = unique(c(d$Var1.label,d$Var2.label))
varIds = v[match(varLabels,v$name),]$pk
nodesDot = paste("V",varIds,' [label="',varLabels,'"]', sep='')
edgesProperties = dotEdgeTypes[d$Relation]
edgesDot = paste(
"V",d$Var1,
" -> ",
"V",d$Var2,
" [",edgesProperties,"] ",
sep=""
)
dot = paste0("digraph chield {\n",
'node [color="#e92b2b", style=filled, fillcolor="#ffd2d2"]\n\n',
paste(nodesDot,collapse = "\n"),
"\n",
paste(edgesDot, collapse = "\n"),
"\n}"
)
return(dot)
}
d = read.csv("../app/data/db/CausalLinks.csv",stringsAsFactors = F)
v = read.csv("../app/data/db/Variables.csv",stringsAsFactors = F)
d$Var1.label = v[match(d$Var1,v$pk),]$name
d$Var2.label = v[match(d$Var2,v$pk),]$name
for(doc in unique(d$bibref)){
docDot = causalLinksToDOT(d[d$bibref==doc,])
filename = paste0("../../Graphs/dot/",doc,".dot")
cat(docDot,file=filename)
}
allLinksDot = causalLinksToDOT(d)
cat(allLinksDot, file="../../Graphs/dotClusters/AllLinks.dot")
# Components
g = graph_from_data_frame(d[d$Relation!="/>",
c("Var1.label","Var2.label")])
clu <- components(g)
grps = groups(clu)
for(i in 1:length(grps)){
componentVariables = grps[[i]]
dx = d[d$Var1.label %in% componentVariables &
d$Var2.label %in% componentVariables &
d$Relation!="/>"]
componentDot = causalLinksToDOT(dx)
filename = paste0("../../Graphs/dotClusters/Cluster",i)
cat(componentDot,file=filename)
}
# Convert causal links to dot language
library(igraph)
try(setwd("~/Documents/Bristol/CHIELD/CHIELD_Online/processing/"))
dotEdgeTypes = c(">"= 'arrowhead="normal",arrowtail="none"',
"<=>"= 'arrowhead="normal",arrowtail="normal"',
"<"= 'arrowhead="none",arrowtail="normal"',
"~"= 'arrowhead="none",arrowtail="none",style="dashed",color="#b3b6b7"',
"/>"='arrowhead="tee",arrowtail="none"',
">>"='arrowhead="normal",arrowtail="none"',
"~="='arrowhead="dot",arrowtail="none"',
"^"='arrowhead="normal",arrowtail="none",style="dashed",color="Green"'
)
causalLinksToDOT = function(d){
varLabels = unique(c(d$Var1.label,d$Var2.label))
varIds = v[match(varLabels,v$name),]$pk
nodesDot = paste("V",varIds,' [label="',varLabels,'"]', sep='')
edgesProperties = dotEdgeTypes[d$Relation]
edgesDot = paste(
"V",d$Var1,
" -> ",
"V",d$Var2,
" [",edgesProperties,"] ",
sep=""
)
dot = paste0("digraph chield {\n",
'node [color="#e92b2b", style=filled, fillcolor="#ffd2d2"]\n\n',
paste(nodesDot,collapse = "\n"),
"\n",
paste(edgesDot, collapse = "\n"),
"\n}"
)
return(dot)
}
d = read.csv("../app/data/db/CausalLinks.csv",stringsAsFactors = F)
v = read.csv("../app/data/db/Variables.csv",stringsAsFactors = F)
d$Var1.label = v[match(d$Var1,v$pk),]$name
d$Var2.label = v[match(d$Var2,v$pk),]$name
for(doc in unique(d$bibref)){
docDot = causalLinksToDOT(d[d$bibref==doc,])
filename = paste0("../../Graphs/dot/",doc,".dot")
cat(docDot,file=filename)
}
allLinksDot = causalLinksToDOT(d)
cat(allLinksDot, file="../../Graphs/dotClusters/AllLinks.dot")
# Components
g = graph_from_data_frame(d[d$Relation!="/>",
c("Var1.label","Var2.label")])
clu <- components(g)
grps = groups(clu)
for(i in 1:length(grps)){
componentVariables = grps[[i]]
dx = d[d$Var1.label %in% componentVariables &
d$Var2.label %in% componentVariables &
d$Relation!="/>",]
componentDot = causalLinksToDOT(dx)
filename = paste0("../../Graphs/dotClusters/Cluster",i)
cat(componentDot,file=filename)
}
g = graph_from_data_frame(d[d$Relation!="/>",
c("Var1.label","Var2.label")])
clu <- components(g)
grps = groups(clu)
for(i in 1:length(grps)){
componentVariables = grps[[i]]
dx = d[d$Var1.label %in% componentVariables &
d$Var2.label %in% componentVariables &
d$Relation!="/>",]
componentDot = causalLinksToDOT(dx)
filename = paste0("../../Graphs/dotClusters/Cluster",i,".dot")
cat(componentDot,file=filename)
}
length(grps)
sapply(length(grps))
sapply(grps,length)
max(componentSizes)/sum(componentSizes)
componentSizes = sapply(grps,length)
max(componentSizes)/sum(componentSizes)
d = d[d$bibref=="dunbar2004gossip",]
d
dunbar = d[d$bibref=="dunbar2004gossip",]
dunbar = d[d$bibref=="dunbar2004gossip",]
dunbar = dunbar[dunbar$Relation!="^",]
dunbarDot = causalLinksToDOT(dunbar)
cat(dunbarDot,file="../../Graphs/dot/dunbar2004gossip_alt.dot")
